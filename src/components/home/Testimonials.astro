---
type Testimonial = {
  name: string;
  position: string;
  company: string;
  image: string;
  quote: string;
};

const testimonials: Testimonial[] = [
  {
    name: "Vytautas Vasiliauskas",
    position: "Technologijų direktorius",
    company: "KAVITA",
    image: "/media/recomendations/rec-kavita.webp",
    quote: "Įdiegus VECTICUM sprendimus, mūsų kasdieniai procesai tapo žymiai efektyvesni. Automatizavus daugelį darbų, galime daugiau dėmesio skirti savo pagrindiniams tikslams – klientų poreikiams ir jų įgyvendinimui. Pastebėjome aiškų laiko ir resursų taupymą, VECTICUM tapo mūsų komandos kasdienių darbų partneriu, padedančiu užtikrinti aukščiausią paslaugų kokybę."
  },
  {
    name: "Georgij Nikonorov",
    position: "HR vadovas",
    company: "YUKON Advanced Optics Worldwide",
    image: "/media/recomendations/yukon-rec.png",
    quote: "Mes nuoširdžiai vertiname Vecticum darbą — platforma padėjo mums sisteminti ir automatizuoti procesus, taip pat ženkliai padidinti mūsų darbo efektyvumą. Džiugina patogumas, apgalvotas funkcionalumas ir operatyvi pagalba. Komanda visada reaguoja į iškylančius klausimus ir greitai išsprendžia bet kokias problemas. Dėkojame Vecticum už bendradarbiavimą ir rūpestį klientais!"
  },
  {
    name: "Skaistė Grėbliauskė",
    position: "Finansų direktorė",
    company: "FREDA",
    image: "/media/recomendations/FREDA-REC.png",
    quote: "Šis sprendimas ženkliai pagerino mūsų įmonės dokumentų valdymo procesus. Sistema veikia patikimai ir yra lengvai pritaikoma augantiems poreikiams. Bendradarbiavimas su Vecticum komanda leidžia efektyviai diegti naujus funkcionalumus ir užtikrinti, kad dokumentų apdorojimas vyktų sklandžiai."
  },
  {
    name: "Erika Grigaliūnaitė",
    position: "Pirkimų vadybininkė",
    company: "GATAS",
    image: "/media/recomendations/GATAS-rec.png",
    quote: "Nesudėtingas programos naudojimas. Palengvėja sąskaitų apskaita, yra galimybė pasitikrinti, ar visos sąskaitos užregistruotos, todėl darbas tampa lengvesnis ir efektyvesnis."
  }
];

---

<section class="bg-white py-20 px-4 sm:px-6 lg:px-8">
  <div class="mx-auto max-w-7xl">
    <div class="mb-14 text-center">
      <h2 class="text-4xl sm:text-5xl font-bold text-gray-900">Ką sako mūsų klientai</h2>
      <p class="mt-4 text-lg text-gray-600">Įmonės, kurios kasdien pasitiki VECTICUM sprendimais</p>
    </div>

    <div class="relative mx-auto max-w-5xl">
      <div class="testimonials-container overflow-hidden">
        <div class="testimonials-track flex transition-transform duration-500 ease-out">
          {testimonials.map((testimonial) => (
            <div class="testimonial-slide w-full flex-shrink-0 px-4">
              <article class="mx-auto max-w-4xl rounded-2xl border border-gray-200 bg-white p-8 shadow-lg md:p-10">
                <div class="mb-6 flex items-start justify-between gap-4">
                  <div class="flex items-center gap-4">
                    <div class="h-14 w-14 flex-shrink-0 overflow-hidden rounded-xl bg-gray-100">
                      <img src={testimonial.image} alt={testimonial.company} class="h-full w-full object-cover" loading="lazy" />
                    </div>
                    <div>
                      <p class="font-semibold text-gray-900">{testimonial.name}</p>
                      <p class="text-sm text-gray-600">{testimonial.position}</p>
                      <p class="text-sm font-medium text-[#C81F6A]">{testimonial.company}</p>
                    </div>
                  </div>
                  
                  <div class="flex flex-shrink-0 items-center gap-0.5">
                    {[...Array(5)].map((_star, starIndex) => (
                      <svg class="h-5 w-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927a1 1 0 011.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                      </svg>
                    ))}
                  </div>
                </div>

                <p class="text-base leading-relaxed text-gray-700 md:text-lg">"{testimonial.quote}"</p>
              </article>
            </div>
          ))}
        </div>
      </div>

      <button
        id="prevBtn"
        class="absolute left-0 top-1/2 z-10 -translate-y-1/2 rounded-full bg-white p-2.5 text-gray-600 shadow-lg transition hover:bg-gray-50 hover:text-[#C81F6A] focus:outline-none focus:ring-2 focus:ring-[#C81F6A] focus:ring-offset-2"
        aria-label="Ankstesnis atsiliepimas"
      >
        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>

      <button
        id="nextBtn"
        class="absolute right-0 top-1/2 z-10 -translate-y-1/2 rounded-full bg-white p-2.5 text-gray-600 shadow-lg transition hover:bg-gray-50 hover:text-[#C81F6A] focus:outline-none focus:ring-2 focus:ring-[#C81F6A] focus:ring-offset-2"
        aria-label="Sekantis atsiliepimas"
      >
        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>
    </div>

    <div class="mt-10 flex flex-col items-center gap-6">
      <div class="flex items-center gap-2">
        {testimonials.map((_testimonial, index) => (
          <button
            class="dot h-2.5 w-2.5 rounded-full bg-gray-300 transition-all duration-300"
            data-index={index}
            aria-label={`Peržiūrėti atsiliepimą ${index + 1}`}
          />
        ))}
      </div>

      <a href="/rekomendacijos" class="group inline-flex items-center gap-2 font-semibold text-[#C81F6A] transition hover:text-[#A51856]">
        Visos rekomendacijos
        <svg class="h-5 w-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
        </svg>
      </a>
    </div>
  </div>
</section>

<script>
  // @ts-nocheck
  document.addEventListener('DOMContentLoaded', function() {
    const track = document.querySelector('.testimonials-track');
    const slides = document.querySelectorAll('.testimonial-slide');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const dots = document.querySelectorAll('.dot');

    let currentIndex = 0;
    const totalSlides = slides.length;

    function updateCarousel() {
      if (!track) return;
      const firstSlide = slides[0];
      const slideWidth = firstSlide ? firstSlide.offsetWidth : 0;
      const offset = -(currentIndex * slideWidth);
      track.style.transform = 'translateX(' + offset + 'px)';

      dots.forEach((dot, index) => {
        if (index === currentIndex) {
          dot.classList.add('is-active');
        } else {
          dot.classList.remove('is-active');
        }
      });
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % totalSlides;
      updateCarousel();
    }

    function prevSlide() {
      currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
      updateCarousel();
    }

    if (prevBtn) prevBtn.addEventListener('click', prevSlide);
    if (nextBtn) nextBtn.addEventListener('click', nextSlide);

    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        currentIndex = index;
        updateCarousel();
      });
    });

    let autoplayInterval = setInterval(nextSlide, 6000);

    const container = document.querySelector('.testimonials-container');
    if (container) {
      container.addEventListener('mouseenter', () => clearInterval(autoplayInterval));
      container.addEventListener('mouseleave', () => {
        clearInterval(autoplayInterval);
        autoplayInterval = setInterval(nextSlide, 6000);
      });
    }

    let touchStartX = 0;
    let touchEndX = 0;

    if (container) {
      container.addEventListener('touchstart', function(event) {
        touchStartX = event.changedTouches[0].screenX;
      }, { passive: true });

      container.addEventListener('touchend', function(event) {
        touchEndX = event.changedTouches[0].screenX;
        handleSwipe();
      });
    }

    function handleSwipe() {
      if (touchEndX < touchStartX - 50) nextSlide();
      if (touchEndX > touchStartX + 50) prevSlide();
    }

    document.addEventListener('keydown', (event) => {
      if (event.key === 'ArrowLeft') prevSlide();
      if (event.key === 'ArrowRight') nextSlide();
    });

    updateCarousel();
  });
</script>

<style>
  .dot.is-active {
    background-color: #C81F6A;
    width: 0.75rem;
  }

  #prevBtn:focus-visible,
  #nextBtn:focus-visible,
  .dot:focus-visible {
    outline: 2px solid #C81F6A;
    outline-offset: 4px;
  }
</style>
