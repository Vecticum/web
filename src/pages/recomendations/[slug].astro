---
import { getCollection, render } from "astro:content";
import MainLayout from "../../layouts/MainLayout.astro";

export async function getStaticPaths() {
  const recommendations = await getCollection("recomendations");
  return recommendations.map((recommendation) => ({
    params: { slug: recommendation.id },
    props: recommendation,
  }));
}

const recommendation = Astro.props;
const { Content } = await render(recommendation);
---

<MainLayout>
  <div class="py-8 sm:py-16 md:py-20">
    <h1
      class="mt-2 mx-auto text-center text-4xl font-semibold tracking-normal text-balance text-gray-950 sm:text-5xl"
    >
      {recommendation.data.title}
    </h1>
  </div>
  <div
    class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 mb-8 sm:mb-16 md:mb-20"
  >
    <div class="mb-8">
      <img
        src={recommendation.data.image}
        alt={recommendation.data.title}
        class="w-full h-64 object-cover rounded-lg shadow-md"
      />
    </div>
    
    <div class="prose prose-lg mx-auto">
      <Content />
    </div>
    
    <div class="mt-8 text-center">
      <a
        href="/recomendations"
        class="inline-flex items-center text-accent hover:text-accent-dark"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5 mr-1"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z"
            clip-rule="evenodd"
          />
        </svg>
        Grįžti į visas rekomendacijas
      </a>
    </div>
  </div>
</MainLayout>